/**
 * BootstrapValidator (http://github.com/nghuuphuoc/bootstrapvalidator)
 *
 * A jQuery plugin to validate form fields. Use with Bootstrap 3
 *
 * @version     v0.3.1-dev
 * @author      https://twitter.com/nghuuphuoc
 * @copyright   (c) 2013 - 2014 Nguyen Huu Phuoc
 * @license     MIT
 */
(function(n){var t=function(i,r){this.$form=n(i);this.options=n.extend({},t.DEFAULT_OPTIONS,r);this.dfds={};this.results={};this.invalidField=null;this.$submitButton=null;this._init();this.STATUS_NOT_VALIDATED="NOT_VALIDATED";this.STATUS_VALIDATING="VALIDATING";this.STATUS_INVALID="INVALID";this.STATUS_VALID="VALID"};t.DEFAULT_OPTIONS={elementClass:"bootstrap-validator-form",message:"This value is not valid",columns:12,feedbackIcons:null,submitButtons:'button[type="submit"]',submitHandler:null,live:"enabled",fields:null};t.prototype={constructor:t,_init:function(){var t,i;if(this.options.fields!=null){t=this;this.$form.attr("novalidate","novalidate").addClass(this.options.elementClass).on("submit.bootstrapValidator",function(n){n.preventDefault();t.validate()}).find(this.options.submitButtons).on("click",function(){t.$submitButton=n(this)});for(i in this.options.fields)this._initField(i);this._setLiveValidating()}},_initField:function(t){var i,e,u,r;if(this.options.fields[t]!=null&&this.options.fields[t].validators!=null){if(this.dfds[t]={},this.results[t]={},i=this.getFieldElements(t),i==null){delete this.options.fields[t];delete this.dfds[t];return}e=n(i[0]);u=e.parents(".form-group");for(r in this.options.fields[t].validators){if(!n.fn.bootstrapValidator.validators[r]){delete this.options.fields[t].validators[r];continue}this.results[t][r]=this.STATUS_NOT_VALIDATED;n("<small/>").css("display","none").attr("data-bs-validator",r).addClass("help-block").appendTo(u)}this.options.feedbackIcons&&(u.addClass("has-feedback"),n("<i/>").css("display","none").addClass("form-control-feedback").insertAfter(n(i[i.length-1])));this.options.fields[t].enabled==null&&(this.options.fields[t].enabled=!0);var f=this,o=i.attr("type"),s="radio"==o||"checkbox"==o||"SELECT"==i[0].tagName?"change":"keyup";i.on(s,function(){for(var n in f.options.fields[t].validators)f.results[t][n]=f.STATUS_NOT_VALIDATED})}},_setLiveValidating:function(){var n,t;if("enabled"==this.options.live){n=this;for(t in this.options.fields)(function(t){var i=n.getFieldElements(t),r,u;if(i){r=i.attr("type");u="radio"==r||"checkbox"==r||"SELECT"==i[0].tagName?"change":"keyup";i.on(u,function(){n.validateField(t)})}})(t)}},_disableSubmitButtons:function(n){n?this.options.live!="disabled"&&this.$form.find(this.options.submitButtons).attr("disabled","disabled"):this.$form.find(this.options.submitButtons).removeAttr("disabled")},_submit:function(){if(!this.isValid()){"submitted"==this.options.live&&(this.options.live="enabled",this._setLiveValidating());this.invalidField&&this.getFieldElements(this.invalidField).focus();return}this._disableSubmitButtons(!0);this.options.submitHandler&&"function"==typeof this.options.submitHandler?this.options.submitHandler.call(this,this,this.$form,this.$submitButton):this.$form.off("submit.bootstrapValidator").submit()},getFieldElements:function(n){var t=this.$form.find('[name="'+n+'"]');return t.length==0?null:t},validate:function(){if(!this.options.fields)return this;this._disableSubmitButtons(!0);for(var n in this.options.fields)this.validateField(n);return this._submit(),this},validateField:function(t){if(this.options.fields[t].enabled){var f=this,e=this.getFieldElements(t),r=n(e[0]),o=this.options.fields[t].validators,i,u;if(e.length==1&&e.is(":disabled")){delete this.options.fields[t];delete this.dfds[t];return}for(i in o)(this.dfds[t][i]&&this.dfds[t][i].reject(),this.results[t][i]!=this.STATUS_VALID&&this.results[t][i]!=this.STATUS_INVALID)&&(this.results[t][i]=this.STATUS_VALIDATING,u=n.fn.bootstrapValidator.validators[i].validate(this,r,o[i]),"object"==typeof u?(this.updateStatus(r,i,this.STATUS_VALIDATING),this.dfds[t][i]=u,u.done(function(n,i){delete f.dfds[t][i];n?f.updateStatus(r,i,f.STATUS_VALID):f.updateStatus(r,i,f.STATUS_INVALID)})):"boolean"==typeof u&&(u?this.updateStatus(r,i,this.STATUS_VALID):this.updateStatus(r,i,this.STATUS_INVALID)))}},isValid:function(){var n,t;for(n in this.results)if(this.options.fields[n].enabled)for(t in this.results[n]){if(this.results[n][t]==this.STATUS_NOT_VALIDATED||this.results[n][t]==this.STATUS_VALIDATING)return!1;if(this.results[n][t]==this.STATUS_INVALID)return this.invalidField=n,!1}return!0},updateStatus:function(t,i,r){var o=this,f=t.attr("name"),h=this.options.fields[f].validators[i],s=h.message||this.options.message,u=t.parents(".form-group"),e=u.find(".help-block[data-bs-validator]");switch(r){case this.STATUS_VALIDATING:this.results[f][i]=this.STATUS_VALIDATING;this._disableSubmitButtons(!0);u.removeClass("has-success").removeClass("has-error");e.filter('.help-block[data-bs-validator="'+i+'"]').html(s).hide();this.options.feedbackIcons&&u.find(".form-control-feedback").removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).addClass(this.options.feedbackIcons.validating).show();break;case this.STATUS_INVALID:this.results[f][i]=this.STATUS_INVALID;this._disableSubmitButtons(!0);u.removeClass("has-success").addClass("has-error");e.filter('[data-bs-validator="'+i+'"]').html(s).show();this.options.feedbackIcons&&u.find(".form-control-feedback").removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.validating).addClass(this.options.feedbackIcons.invalid).show();break;case this.STATUS_VALID:this.results[f][i]=this.STATUS_VALID;e.filter('[data-bs-validator="'+i+'"]').hide();e.filter(function(){var t=n(this).css("display"),i=n(this).attr("data-bs-validator");return"block"==t||o.results[f][i]!=o.STATUS_VALID}).length==0&&(this._disableSubmitButtons(!1),u.removeClass("has-error").addClass("has-success"),this.options.feedbackIcons&&u.find(".form-control-feedback").removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).addClass(this.options.feedbackIcons.valid).show())}return this},resetForm:function(n){var t,i;for(t in this.options.fields){this.dfds[t]={};this.results[t]={};for(i in this.options.fields[t].validators)this.results[t][i]=this.STATUS_NOT_VALIDATED}return this.invalidField=null,this.$submitButton=null,this.$form.find(".has-error").removeClass("has-error").end().find(".has-success").removeClass("has-success").end().find(".help-block[data-bs-validator]").hide(),this._disableSubmitButtons(!1),this.options.feedbackIcons&&this.$form.find(".form-control-feedback").removeClass(this.options.feedbackIcons.valid).removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).hide(),n&&this.$form.get(0).reset(),this},enableFieldValidators:function(n,t){var r,u,i;if(this.options.fields[n].enabled=t,t)for(r in this.options.fields[n].validators)this.results[n][r]=this.STATUS_NOT_VALIDATED;else u=this.getFieldElements(n),i=u.parents(".form-group"),i.removeClass("has-success has-error").find(".help-block[data-bs-validator]").hide(),this.options.feedbackIcons&&i.find(".form-control-feedback").removeClass(this.options.feedbackIcons.invalid).removeClass(this.options.feedbackIcons.validating).removeClass(this.options.feedbackIcons.valid).hide(),this._disableSubmitButtons(!1);return this}};n.fn.bootstrapValidator=function(i){return this.each(function(){var u=n(this),r=u.data("bootstrapValidator");r||u.data("bootstrapValidator",r=new t(this,i));"string"==typeof i&&r[i]()})};n.fn.bootstrapValidator.validators={};n.fn.bootstrapValidator.Constructor=t})(window.jQuery),function(n){n.fn.bootstrapValidator.validators.between={validate:function(n,t,i){var r=t.val();return r==""?!0:(r=parseFloat(r),i.inclusive===!0?r>i.min&&r<i.max:r>=i.min&&r<=i.max)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.callback={validate:function(t,i,r){var f=i.val(),u;return r.callback&&"function"==typeof r.callback?(u=new n.Deferred,u.resolve(r.callback.call(this,f,t),"callback"),u):!0}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.choice={validate:function(n,t,i){var r=n.getFieldElements(t.attr("name")).filter(":checked").length;return i.min&&r<i.min||i.max&&r>i.max?!1:!0}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.creditCard={validate:function(n,t){var i=t.val(),u;if(i=="")return!0;if(/[^0-9-\s]+/.test(i))return!1;i=i.replace(/\D/g,"");var e=0,r=0,f=!1,o=i.length;for(u=o-1;u>=0;u--)r=parseInt(i.charAt(u),10),f&&(r*=2)>9&&(r-=9),e+=r,f=!f;return e%10==0}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.date={validate:function(n,t,i){var s=t.val(),h,r,e,f,u,o;if(s=="")return!0;if(i.format=i.format||"MM/DD/YYYY",h=i.format.indexOf("/")==-1?"-":"/",r=s.split(h),r.length!=3)return!1;switch(i.format.toUpperCase().replace(/-/g,"/")){case"YYYY/MM/DD":e=r[2];f=r[1];u=r[0];break;case"YYYY/DD/MM":e=r[1];f=r[2];u=r[0];break;case"DD/MM/YYYY":e=r[0];f=r[1];u=r[2];break;case"MM/DD/YYYY":e=r[1];f=r[0];u=r[2];break;default:return!1}return(e=parseInt(e,10),f=parseInt(f,10),u=parseInt(u,10),u<1e3||u>9999||f==0||f>12)?!1:(o=[31,28,31,30,31,30,31,31,30,31,30,31],(u%400==0||u%100!=0&&u%4==0)&&(o[1]=29),e>0&&e<=o[f-1])}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.different={validate:function(n,t,i){var u=t.val(),r;return u==""?!0:(r=n.getFieldElements(i.field),r==null)?!0:u!=r.val()?(n.updateStatus(r,"different",n.STATUS_VALID),!0):!1}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.digits={validate:function(n,t){var i=t.val();return i==""?!0:/^\d+$/.test(i)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.emailAddress={validate:function(n,t){var i=t.val(),r;return i==""?!0:(r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r.test(i))}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.greaterThan={validate:function(n,t,i){var r=t.val();return r==""?!0:(r=parseFloat(r),i.inclusive===!0?r>i.value:r>=i.value)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.hexColor={validate:function(n,t){var i=t.val();return i==""?!0:/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.identical={validate:function(n,t,i){var u=t.val(),r;return u==""?!0:(r=n.getFieldElements(i.field),r==null)?!0:u==r.val()?(n.updateStatus(r,"identical",n.STATUS_VALID),!0):!1}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.lessThan={validate:function(n,t,i){var r=t.val();return r==""?!0:(r=parseFloat(r),i.inclusive===!0?r<i.value:r<=i.value)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.notEmpty={validate:function(t,i){var r=i.attr("type");return"radio"==r||"checkbox"==r?t.getFieldElements(i.attr("name")).filter(":checked").length>0:n.trim(i.val())!=""}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.regexp={validate:function(n,t,i){var r=t.val();return r==""?!0:i.regexp.test(r)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.remote={validate:function(t,i,r){var o=i.val(),s,u,f,e;return o==""?!0:(s=i.attr("name"),u=r.data,u==null&&(u={}),"function"==typeof u&&(u=u.call(this,t)),u[s]=o,f=new n.Deferred,e=n.ajax({type:"POST",url:r.url,dataType:"json",data:u}),e.then(function(n){f.resolve(n.valid===!0||n.valid==="true","remote")}),f.fail(function(){e.abort()}),f)}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.stringLength={validate:function(t,i,r){var f=i.val(),u;return f==""?!0:(u=n.trim(f).length,r.min&&u<r.min||r.max&&u>r.max)?!1:!0}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.uri={validate:function(n,t){var i=t.val(),r;return i==""?!0:(r=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?$","i"),r.test(i))}}}(window.jQuery),function(n){n.fn.bootstrapValidator.validators.zipCode={validate:function(n,t,i){var r=t.val();if(r==""||!i.country)return!0;switch(i.country.toUpperCase()){case"DK":return/^(DK(-|\s)?)?\d{4}$/i.test(r);case"SE":return/^(S-)?\d{3}\s?\d{2}$/i.test(r);case"US":default:return/^\d{5}([\-]\d{4})?$/.test(r)}}}}(window.jQuery)