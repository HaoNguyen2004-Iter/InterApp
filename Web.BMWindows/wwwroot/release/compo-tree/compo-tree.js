(function(n){n.fn.compoTree=function(t){var i=this,u=this.selector,r=n.extend({url:null,params:null,item:null,selectCallback:null,groupSize:null},t),f=r.item;i.drawLis=function(t,r,u,e){var o="";return n(t).each(function(){if(this[f.parent]==r){var n=e+this[f.value]+";";o+='<li val="'+n+'" dataid="'+this[f.value]+'" parent="'+this[f.parent]+'"><a href="javascript:void(0)" class="level-'+u+'" title="'+this[f.text]+'"><i class="fa fa-plus-square-o"><\/i>'+this[f.text]+"<\/a ><\/li >";o+=i.drawLis(t,this[f.value],u+1,n)}}),o};i.selectOption=function(t){n(u).val(t);var i=n(u).next();n(i).find("li").each(function(){var u=n(this).attr("val"),r;u==t&&(r=n(this).find("a").text(),i.find(".dropdown-toggle span").text(r))})};i.events=function(){var f=n(u).val(),t;f!=""&&i.selectOption(f);t=n(u).next();n(t).find("li").each(function(){var u=n(this),f=u.attr("dataid"),e=n(t).find('li[parent="'+f+'"]');e.length>0?u.find("i").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"):u.find("i").css("opacity",0);u.find("a").click(function(){i.selectOption(u.attr("val"));r.selectCallback!=null&&r.selectCallback(u)})})};i.init=function(){var t,f;n(u).css("display","none");t='<div class="compo-tree"><div class="btn-group '+(r.groupSize!=null?"btn-group-"+r.groupSize:"")+'"><a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><span>'+r.placeHolder+'<\/span><i class="caret"><\/i><\/a><ul class="dropdown-menu"><\/ul><\/div><\/div>';n(t).insertAfter(n(u));f=n(u).next();loadData(r.url,r.params,null,function(t){var r,u;r=t.Many!=null?t.Many:t;r.length>0&&(u=i.drawLis(r,null,1,";"),n(f).find("ul").html(u));i.events()})};i.init()}})(jQuery)