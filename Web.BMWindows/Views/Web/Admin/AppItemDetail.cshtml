@model Service.BMWindows.Executes.AppItem.AppItemViewModel

<form novalidate>
    
<input type="hidden" name="Id" value="@Model.Id" />

<div class="form-group">
    <label class="control-label">Tên ứng dụng <span class="text-danger">*</span></label>
    <input type="text" 
           name="Name" 
           value="@Model.Name" 
           class="form-control" 
           placeholder="Nhập tên ứng dụng" 
           maxlength="200" 
           data-validation="required" />
</div>

<div class="form-group">
    <label class="control-label">Nhóm ứng dụng <span class="text-danger">*</span></label>
    <select name="CategoryId" class="form-control" style="padding: 1px 14px; " data-validation="required">
        <option value="">-- Chọn nhóm --</option>
        @if (ViewBag.Categories != null)
        {
            @foreach (var cat in ViewBag.Categories as IEnumerable<Service.BMWindows.Executes.Category.CategoryViewModel>)
            {
                @if (Model.CategoryId == cat.Id)
                {
                    <option value="@cat.Id" selected="selected">@cat.Name</option>
                }
                else
                {
                    <option value="@cat.Id">@cat.Name</option>
                }
            }
        }
    </select>
</div>

<div class="form-group">
    <label class="control-label">URL</label>
    <input type="url" 
           name="Url" 
           value="@Model.Url" 
           class="form-control" 
           placeholder="https://example.com" 
           maxlength="500" />
</div>

    <div class="form-group">
        <label class="control-label">Icon</label>

        <div class="d-flex align-items-start mb-2">
            <div style="width:120px; height:80px; border:1px solid #ddd; display:flex; align-items:center; justify-content:center; overflow:hidden; background:#fff; margin-right:10px;">
                <img id="iconPreview" src="@(string.IsNullOrEmpty(Model.Icon) ? Url.Content("~/images/icons/settings.png") : Model.Icon)" alt="Icon preview" style="max-width:100%; max-height:100%;" />
            </div>
            <div style="flex:1">
                <input type="hidden" name="Icon" id="Icon" value="@Model.Icon" />
                <div class="mb-2">
                    <input type="file" id="IconFile" accept="image/*" class="form-control-file" />
                </div>
                <div id="iconUploadStatus" style="font-size:12px;color:#666;display:none;">Đang tải lên...</div>
                <div style="font-size:12px;color:#666; margin-top:8px;">Hoặc nhập đường dẫn ảnh trực tiếp:</div>
                <input type="text" name="IconManual" id="IconManual" value="@Model.Icon" class="form-control mt-1" placeholder="/media/..." />
                <button type="button" id="btnApplyManualIcon" class="btn btn-sm btn-light mt-2">Áp dụng đường dẫn</button>
            </div>
        </div>

    </div>

<div class="form-group">
    <label class="control-label">Từ khóa</label>
    <input type="text" 
           name="Keyword" 
           value="@Model.Keyword" 
           class="form-control" 
           placeholder="Nhập từ khóa để tìm kiếm" 
           maxlength="500" />
</div>

<div class="form-group">
    <label class="control-label">Thứ tự ưu tiên</label>
    <input type="number" 
           name="Prioritize" 
           value="@Model.Prioritize" 
           class="form-control" 
           placeholder="Nhập số thứ tự ưu tiên"
           min="0"
           step="1" />
</div>

<div class="form-group">
    <label class="control-label">Trạng thái</label>
    <select name="Status" class="form-control" style="padding: 1px 12px">
        @if (Model.Status == 0)
        {
            <option value="0" selected="selected">Dừng</option>
        }
        else
        {
            <option value="0">Dừng</option>
        }
        
        @if (Model.Status == 1)
        {
            <option value="1" selected="selected">Hoạt động</option>
        }
        else
        {
            <option value="1">Hoạt động</option>
        }
        
    </select>
</div>

</form>

<script src="~/js/web/admin/appitem.icon.upload.js"></script>
